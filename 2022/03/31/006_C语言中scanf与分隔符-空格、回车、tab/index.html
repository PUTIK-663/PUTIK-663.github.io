

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/exImg/favicon.png">
  <link rel="icon" href="/exImg/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="putik-663">
  <meta name="keywords" content="putik-663">
  
    <meta name="description" content="众所周知，C语言中的scanf函数的作用是从标准输入设备(通常是键盘)读取输入值，并存储到参数列表中指针所指向的内存单元。下面从几个方面说一下一些稍微细节的东西。下面的实验都在vc6.0中通过。 一、scanf的返回值scanf通常返回的是成功赋值(从标准输入设备赋值到参数列表所指定的内存区域)的数据项数，如果出错或是遇到“end of file”（注意，如果想从键盘输入EOF，在windows的">
<meta property="og:type" content="article">
<meta property="og:title" content="006_C语言中scanf与分隔符(空格、回车、tab)">
<meta property="og:url" content="http://italk.site/2022/03/31/006_C%E8%AF%AD%E8%A8%80%E4%B8%ADscanf%E4%B8%8E%E5%88%86%E9%9A%94%E7%AC%A6-%E7%A9%BA%E6%A0%BC%E3%80%81%E5%9B%9E%E8%BD%A6%E3%80%81tab/index.html">
<meta property="og:site_name" content="putik-663的个人博客">
<meta property="og:description" content="众所周知，C语言中的scanf函数的作用是从标准输入设备(通常是键盘)读取输入值，并存储到参数列表中指针所指向的内存单元。下面从几个方面说一下一些稍微细节的东西。下面的实验都在vc6.0中通过。 一、scanf的返回值scanf通常返回的是成功赋值(从标准输入设备赋值到参数列表所指定的内存区域)的数据项数，如果出错或是遇到“end of file”（注意，如果想从键盘输入EOF，在windows的">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://italk.site/2022/03/31/006_C%E8%AF%AD%E8%A8%80%E4%B8%ADscanf%E4%B8%8E%E5%88%86%E9%9A%94%E7%AC%A6-%E7%A9%BA%E6%A0%BC%E3%80%81%E5%9B%9E%E8%BD%A6%E3%80%81tab/clip_image001.png">
<meta property="og:image" content="http://italk.site/2022/03/31/006_C%E8%AF%AD%E8%A8%80%E4%B8%ADscanf%E4%B8%8E%E5%88%86%E9%9A%94%E7%AC%A6-%E7%A9%BA%E6%A0%BC%E3%80%81%E5%9B%9E%E8%BD%A6%E3%80%81tab/clip_image002.png">
<meta property="og:image" content="http://italk.site/2022/03/31/006_C%E8%AF%AD%E8%A8%80%E4%B8%ADscanf%E4%B8%8E%E5%88%86%E9%9A%94%E7%AC%A6-%E7%A9%BA%E6%A0%BC%E3%80%81%E5%9B%9E%E8%BD%A6%E3%80%81tab/clip_image003.png">
<meta property="article:published_time" content="2022-04-01T02:23:13.000Z">
<meta property="article:modified_time" content="2022-04-01T02:44:22.737Z">
<meta property="article:author" content="putik-663">
<meta property="article:tag" content="-C语言">
<meta property="article:tag" content="-转载">
<meta property="article:tag" content="-编程基础">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://italk.site/2022/03/31/006_C%E8%AF%AD%E8%A8%80%E4%B8%ADscanf%E4%B8%8E%E5%88%86%E9%9A%94%E7%AC%A6-%E7%A9%BA%E6%A0%BC%E3%80%81%E5%9B%9E%E8%BD%A6%E3%80%81tab/clip_image001.png">
  
  
  <title>006_C语言中scanf与分隔符(空格、回车、tab) - putik-663的个人博客</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hint.css@2/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->

  
<link rel="stylesheet" href="/exCss/dec.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"italk.site","root":"/","version":"1.8.14","typing":{"enable":false,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 6.1.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Putik-663</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="006_C语言中scanf与分隔符(空格、回车、tab)">
              
                006_C语言中scanf与分隔符(空格、回车、tab)
              
            </span>

            
              <div class="mt-3">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-author" aria-hidden="true"></i>
      putik-663
    </span>
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2022-03-31 18:23" pubdate>
        2022年3月31日 晚上
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      4.2k 字
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      35 分钟
    </span>
  

  
  
    
      <!-- 不蒜子统计文章PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> 次
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">006_C语言中scanf与分隔符(空格、回车、tab)</h1>
            
            <div class="markdown-body">
              <p>众所周知，C语言中的scanf函数的作用是从标准输入设备(通常是键盘)读取输入值，并存储到参数列表中指针所指向的内存单元。下面从几个方面说一下一些稍微细节的东西。下面的实验都在vc6.0中通过。</p>
<h3 id="一、scanf的返回值"><a href="#一、scanf的返回值" class="headerlink" title="一、scanf的返回值"></a>一、scanf的返回值</h3><p>scanf通常返回的是成功赋值(从标准输入设备赋值到参数列表所指定的内存区域)的数据项数，如果出错或是遇到“end of file”（注意，如果想从键盘输入EOF，在windows的DOS窗口用Ctrl+Z 或F6；在UNIX系统上，用CTRL+D），则返回EOF，比如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs C"><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;x, &amp;y);<br></code></pre></td></tr></table></figure>

<p>如果x和y都被成功读入，那么scanf的返回值就是2;<br>如果只有x被成功读入，返回值为1;<br>如果x和y都未被成功读入，返回值为0;<br>如果遇到错误或遇到end of file，返回值为EOF。</p>
<h3 id="二、scanf的处理机制"><a href="#二、scanf的处理机制" class="headerlink" title="二、scanf的处理机制"></a>二、scanf的处理机制</h3><p>scanf以删除的方式从缓冲区读入数据(来自标准输入设备的数据存储在缓冲区)，也就是说，scanf从缓冲区读入一个数据项，该数据项在缓冲区中就被清除掉了。而如果scanf需要读取一个数据项，返现缓冲区当前是空的，那么程序就会在scanf代码处阻塞，等待用户输入，scanf函数接收到相应的数据项之后，在缓冲区中将这一数据项清除，scanf函数返回，程序继续执行。</p>
<h3 id="三、scanf对不同类型输入的处理方式"><a href="#三、scanf对不同类型输入的处理方式" class="headerlink" title="三、scanf对不同类型输入的处理方式"></a>三、scanf对不同类型输入的处理方式</h3><p>首先，要清楚一个概念：空白字符(white space)。一般，程序中所指的空白字符是指空格(space)，回车(enter)和指标符(table)。</p>
<h4 id="1、整数-d"><a href="#1、整数-d" class="headerlink" title="1、整数 %d"></a>1、整数 %d</h4><p>对于整型数据的输入，也就是说”%d”类型的输入，scanf默认的分割符是所有的空白字符(空格，回车和指标符都行)。也就是说如果一个scanf函数中出现scanf(“%d%d”,&amp;a,&amp;b)，那么用任何一个空白字符来分隔两个整数a,b的值，变量a,b都可以接收到正确的输入。另外，要注意的是，scanf对于数字输入，会忽略输入数据项前面的空白字符。下面是例1：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs C"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span> </span><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> <br>&#123; <br>    <span class="hljs-type">int</span> a,b; <br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Input the value of a and b:&quot;</span>); <br>    <span class="hljs-keyword">while</span>(<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;a,&amp;b)!=EOF) <br>    &#123; <br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;a=%d,b=%d\n&quot;</span>,a,b); <br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Input the value of a and b:&quot;</span>); <br>    &#125; <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125; <br></code></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs C">Output: <br>Input the value of a and b:<span class="hljs-number">123</span> <span class="hljs-number">456</span> <br>a=<span class="hljs-number">123</span>,b=<span class="hljs-number">456</span> <br>Input the value of a and b:<span class="hljs-number">123</span> <span class="hljs-number">456</span> <br>a=<span class="hljs-number">123</span>,b=<span class="hljs-number">456</span> <br>Input the value of a and b:<span class="hljs-number">123</span> <br><span class="hljs-number">456</span> <br>a=<span class="hljs-number">123</span>,b=<span class="hljs-number">456</span> <br>Input the value of a and b: <br><span class="hljs-number">123</span> <span class="hljs-number">456</span> <br>a=<span class="hljs-number">123</span>,b=<span class="hljs-number">456</span> <br>Input the value of a and b:   <span class="hljs-number">123</span> <span class="hljs-number">456</span> <br>a=<span class="hljs-number">123</span>,b=<span class="hljs-number">456</span> <br>Input the value of a and b: <span class="hljs-number">123</span> <span class="hljs-number">456</span> <br>a=<span class="hljs-number">123</span>,b=<span class="hljs-number">456</span> <br>Input the value of a and b:^Z <br>Press any key to <span class="hljs-keyword">continue</span>...<br></code></pre></td></tr></table></figure>

<h4 id="2、字符串-s"><a href="#2、字符串-s" class="headerlink" title="2、字符串 %s"></a>2、字符串 %s</h4><p>scanf对于字符串输入的处理和对整数类似，会忽略前导的空白字符，而且默认的分隔符是所有的空白字符。但是，要注意的是，由于C语言中，没有string类型，都是用char型数组来表示。因此，scanf会为每一个输入的字符串最后加一个‘\0’。下面是一个例子，可以看出scanf这货的边界控制还是要小心。如下例2：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs C"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span> </span><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> <br>&#123; <br>    <span class="hljs-type">char</span> a[<span class="hljs-number">5</span>],b[<span class="hljs-number">5</span>]; <br>    <span class="hljs-type">int</span> i; <br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Input the value of a and b:&quot;</span>); <br>    <span class="hljs-keyword">while</span>(<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s%s&quot;</span>,a,b)!=EOF) <br>    &#123; <br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;a=%s,b=%s\n&quot;</span>,a,b); <br>        <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">5</span>;i++) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d:(%c) &quot;</span>,a[i],a[i]); <br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>); <br>        <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">5</span>;i++) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d:(%c) &quot;</span>,b[i],b[i]); <br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>); <br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Input the value of a and b:&quot;</span>); <br>    &#125; <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <br>&#125; <br></code></pre></td></tr></table></figure>

<p>运行结果：</p>
<p><img src="/2022/03/31/006_C%E8%AF%AD%E8%A8%80%E4%B8%ADscanf%E4%B8%8E%E5%88%86%E9%9A%94%E7%AC%A6-%E7%A9%BA%E6%A0%BC%E3%80%81%E5%9B%9E%E8%BD%A6%E3%80%81tab/clip_image001.png" srcset="/img/loading.gif" lazyload> </p>
<h4 id="3、字符-c"><a href="#3、字符-c" class="headerlink" title="3、字符 %c"></a>3、字符 %c</h4><p>scanf在处理对字符数据的输入时，既不会忽略前导空白字符，默认也没有任何分隔字符。所有的字符，包括空白字符都会被当成输入字符。下面是例3：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs C"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span> </span><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> <br>&#123; <br>    <span class="hljs-type">char</span> a ,b ; <br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Input the value of a and b:&quot;</span>); <br>    <span class="hljs-keyword">while</span>(<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%c%c&quot;</span>,&amp;a,&amp;b)!=EOF) <br>    &#123; <br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;a=%c,b=%c\n&quot;</span>,a,b); <br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Input the value of a and b:&quot;</span>); <br>    &#125; <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <br>&#125; <br></code></pre></td></tr></table></figure>

<p>运行结果：</p>
<p><img src="/2022/03/31/006_C%E8%AF%AD%E8%A8%80%E4%B8%ADscanf%E4%B8%8E%E5%88%86%E9%9A%94%E7%AC%A6-%E7%A9%BA%E6%A0%BC%E3%80%81%E5%9B%9E%E8%BD%A6%E3%80%81tab/clip_image002.png" srcset="/img/loading.gif" lazyload><br> 可以看出，在对字符数据输入的时候，由于缓冲区中有回车空格等数据，会导致输入数据比较诡异，为了解决这个问题，有以下方法：</p>
<p><strong>(1) 清空缓冲区</strong></p>
<p>在微软系统中，有一个名为fflush(stdin)的函数，可以用来清空缓冲区，如下例4：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs C"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span> </span><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> <br>&#123; <br>    <span class="hljs-type">char</span> a ,b ; <br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Input the value of a and b:&quot;</span>); <br>    <span class="hljs-keyword">while</span>(<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%c%c&quot;</span>,&amp;a,&amp;b)!=EOF) <br>    &#123; <br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;a=%c,b=%c\n&quot;</span>,a,b); <br>        fflush(<span class="hljs-built_in">stdin</span>); <br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Input the value of a and b:&quot;</span>); <br>    &#125; <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <br>&#125; <br></code></pre></td></tr></table></figure>

<p>运行结果：</p>
<p><img src="/2022/03/31/006_C%E8%AF%AD%E8%A8%80%E4%B8%ADscanf%E4%B8%8E%E5%88%86%E9%9A%94%E7%AC%A6-%E7%A9%BA%E6%A0%BC%E3%80%81%E5%9B%9E%E8%BD%A6%E3%80%81tab/clip_image003.png" srcset="/img/loading.gif" lazyload> </p>
<p> <strong>(2)将缓冲区的数据读出来</strong></p>
<p>有的编译系统并没有定义stdin的fflush操作，这个时候，可以把缓冲区中的数据读出来，有如下几种可行的方法：</p>
<p>①getchar()</p>
<p>将例4中的 fflush(stdin); 语句换成：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs C"><span class="hljs-type">char</span> c;<br><span class="hljs-keyword">while</span>((c=getchar())!=<span class="hljs-string">&#x27;\n&#x27;</span>&amp;&amp;c!=EOF);<br></code></pre></td></tr></table></figure>

<p>运行效果和上面的相同。</p>
<p>②gets()</p>
<p>char* gets(char* buffer)从stdin流中读取字符串，直至接受到换行符或EOF时停止，并将读取的结果存放在buffer指针所指向的字符数组中。换行符不作为读取串的内容，读取的换行符被转换为null值，并由此来结束字符串。读入成功，返回与参数buffer相同的指针；读入过程中遇到EOF(End-of-File)或发生错误，返回NULL指针。所以在遇到返回值为NULL的情况，要用ferror或feof函数检查是发生错误还是遇到EOF。<br>要注意的是gets函数可以无限读取，不会判断上限，所以应该确保buffer的空间足够大，以便在执行读操作时不发生溢出。如果溢出，多出来的字符将被写入到堆栈中，这就覆盖了堆栈原先的内容，破坏一个或多个不相关变量的值。</p>
<p>将例4中的 fflush(stdin); 语句换成：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs C"><span class="hljs-type">char</span> c[<span class="hljs-number">10</span>];<br>gets(c);<br></code></pre></td></tr></table></figure>

<p>运行效果也和上面的相同。</p>
<h4 id="4、在stackoverflow上看到的一个问题"><a href="#4、在stackoverflow上看到的一个问题" class="headerlink" title="4、在stackoverflow上看到的一个问题"></a>4、在stackoverflow上看到的一个问题</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs C"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span> </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdlib.h&gt;</span> </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;string.h&gt;</span> </span><br><span class="hljs-type">char</span> *<span class="hljs-title function_">method1</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> <br>&#123; <br>    <span class="hljs-type">static</span> <span class="hljs-type">char</span> a[<span class="hljs-number">4</span>]; <br>    <span class="hljs-built_in">scanf</span> (<span class="hljs-string">&quot;%s\n&quot;</span>, a); <br>    <span class="hljs-keyword">return</span> a; <br>&#125; <br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> <br>&#123; <br>    <span class="hljs-type">char</span> *h = method1(); <br>    <span class="hljs-built_in">printf</span> (<span class="hljs-string">&quot;%s\n&quot;</span>, h); <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <br>&#125; <br></code></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs C">ab <br>cd <br>ab <br>Press any key to <span class="hljs-keyword">continue</span><br></code></pre></td></tr></table></figure>

<p>可以发现，输如两次之后才会输出。这个现象比较诡异，原因如下：</p>
<p>White space (such as blanks, tabs, or newlines) in the format string match any amount of white space, including none, in the input. Everything else matches only itself.<br>Thus with scanf (“%s\n”, a) it will scan for a string followed by optional white space. Since after the first newline more whitespace may follow, scanf is not done after the first newline and looks what’s next. You will notice that you can enter any number of newlines (or tabs or spaces) and scanf will still wait for more.<br>However, when you enter the second string, the sequence of whitespace is delimited and scanning stops.</p>
<h6 id="参考资料："><a href="#参考资料：" class="headerlink" title="参考资料："></a>参考资料：</h6><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://www.csdndoc.com/article/4341194">https://www.csdndoc.com/article/4341194</a>
<a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>
            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/C%E8%AF%AD%E8%A8%80/">-C语言</a>
                    
                      <a class="hover-with-bg" href="/tags/%E8%BD%AC%E8%BD%BD/">-转载</a>
                    
                      <a class="hover-with-bg" href="/tags/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/">-编程基础</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有标有原创的文章均为博主本人呕心沥血之作，转载请注明出处！(实在不想标就算了)
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/03/30/005-%E4%B8%8D%E7%90%86%E8%A7%A3%E7%BC%93%E5%86%B2%E5%8C%BA%E5%AF%BC%E8%87%B4%E6%95%B0%E6%8D%AE%E8%BE%93%E5%87%BA%E5%BC%82%E5%B8%B8/">
                        <span class="hidden-mobile">005_不理解缓冲区导致数据输出异常</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>


















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
